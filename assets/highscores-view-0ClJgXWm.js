import{b as f,_ as p,y as e,E as v}from"./vendor-r3QpqBWY.js";import{G as u,A as _,D as d}from"./index-wxipzR0L.js";import{H as m,g as b}from"./highscores-table-4-M-UVGM.js";import{I as w}from"./icon-name.enum-0ePiKs41.js";class D extends f{difficulties=Object.entries(u).filter(([,t])=>typeof t=="number"&&t!==u.Custom);refSelect=p();refInput=p();constructor(t,i){super(t,i);const s=d,c="",o=1;this.setState({difficulty:s,page:o}),this.request(s,o,c)}render(t,{difficulty:i,collection:s}){const{items:c,total:o,page:l,pages:n,nextPage:a,previousPage:r}=s||{};return e("div",{class:"c-highscores-view"},e("h1",{class:"c-highscores-view__title e-title"},"Highscores ",e("img",{class:"e-icon",src:`icons/${w.Trophy}.png`})),e("div",{class:"c-highscores-view__options"},e("div",{class:"c-highscores-view__option"},e("label",{class:"c-highscores-view__label e-label",htmlFor:"difficulty"},"Difficulty"),e("select",{ref:this.refSelect,onInput:this.onChangeOptions,class:"c-highscores-view__select e-select",id:"difficulty",name:"difficulty"},this.difficulties.map(([g,h])=>e("option",{class:"c-highscores-view__option e-option",value:h,selected:i===h},g)))),e("div",{class:"c-highscores-view__option"},e("form",{onSubmit:this.onChangeOptions},e("label",{class:"c-highscores-view__label e-label",htmlFor:"player"},"Player"),e("input",{ref:this.refInput,id:"player",name:"player",pattern:"^[\\w*?]*$",class:"c-highscores-view__input e-input"})))),e("div",{class:"c-highscores-view__table"},e(m,{rows:c,highlight:"CrjD8A1cqGjxtpVT70aMM"}),l&&n?e("div",{class:"c-highscores-view__pagination"},e("div",null,e("button",{disabled:!r,onClick:()=>this.changePage(r),title:`Page ${r}`},"◀")),e("div",null,o," Entries"),e("div",null,"Page ",l," of ",n),e("div",null,e("button",{disabled:!a,onClick:()=>this.changePage(a),title:`Page ${a}`},"▶"))):""),e("div",{className:"e-back-button"},e(v,{href:_.Home,class:"e-back-button__button e-button"},"← Back")))}onChangeOptions=t=>{t.preventDefault();const i=Number.parseInt(`${this.refSelect.current?.value}`,10),s=this.refInput.current?.value,c=this.state.page;this.request(i,c,s)};changePage=t=>{const i=Number.parseInt(`${this.refSelect.current?.value}`,10),s=this.refInput.current?.value;this.request(i,t,s)};request(t,i,s){this.setState({difficulty:t,collection:void 0}),b({difficulty:t,player:s,page:i}).then(c=>{this.setState({difficulty:t,collection:c})}).catch(()=>{this.setState({difficulty:t,collection:{items:[]}})})}}export{D as HighscoresView};
//# sourceMappingURL=highscores-view-0ClJgXWm.js.map
